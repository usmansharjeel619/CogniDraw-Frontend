"use strict";(self.webpackChunkfrontends=self.webpackChunkfrontends||[]).push([[297],{6946:function(e,t,n){n.d(t,{c:function(){return d}});var r=n(2790),i=n(4254),a=n(4625);n(3121);function d(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:l(e),edges:o(e)};return r.Z(e.graph())||(t.value=i.Z(e.graph())),t}function l(e){return a.Z(e.nodes(),(function(t){var n=e.node(t),i=e.parent(t),a={v:t};return r.Z(n)||(a.value=n),r.Z(i)||(a.parent=i),a}))}function o(e){return a.Z(e.edges(),(function(t){var n=e.edge(t),i={v:t.v,w:t.w};return r.Z(t.name)||(i.name=t.name),r.Z(n)||(i.value=n),i}))}},4254:function(e,t,n){var r=n(316);t.Z=function(e){return(0,r.Z)(e,4)}},297:function(e,t,n){n.d(t,{r:function(){return D}});var r=n(4165),i=n(5861),a=n(7762),d=n(3433),l=n(3529),o=n(6946),c=n(3183),s=n(1319),h=n(8433),g=n(9506),f=n(9913),u={},v={},p={},w=function(e,t){return s.l.trace("In isDescendant",t," ",e," = ",v[t].includes(e)),!!v[t].includes(e)},y=function e(t,n,r,i){s.l.warn("Copying children of ",t,"root",i,"data",n.node(t),i);var a=n.children(t)||[];t!==i&&a.push(t),s.l.warn("Copying (nodes) clusterId",t,"nodes",a),a.forEach((function(a){if(n.children(a).length>0)e(a,n,r,i);else{var d=n.node(a);s.l.info("cp ",a," to ",i," with parent ",t),r.setNode(a,d),i!==n.parent(a)&&(s.l.warn("Setting parent",a,n.parent(a)),r.setParent(a,n.parent(a))),t!==i&&a!==t?(s.l.debug("Setting parent",a,t),r.setParent(a,t)):(s.l.info("In copy ",t,"root",i,"data",n.node(t),i),s.l.debug("Not Setting parent for node=",a,"cluster!==rootId",t!==i,"node!==clusterId",a!==t));var l=n.edges(a);s.l.debug("Copying Edges",l),l.forEach((function(e){s.l.info("Edge",e);var a=n.edge(e.v,e.w,e.name);s.l.info("Edge data",a,i);try{!function(e,t){return s.l.info("Descendants of ",t," is ",v[t]),s.l.info("Edge is ",e),e.v!==t&&e.w!==t&&(v[t]?v[t].includes(e.v)||w(e.v,t)||w(e.w,t)||v[t].includes(e.w):(s.l.debug("Tilt, ",t,",not in descendants"),!1))}(e,i)?s.l.info("Skipping copy of edge ",e.v,"--\x3e",e.w," rootId: ",i," clusterId:",t):(s.l.info("Copying as ",e.v,e.w,a,e.name),r.setEdge(e.v,e.w,a,e.name),s.l.info("newGraph edges ",r.edges(),r.edge(r.edges()[0])))}catch(d){s.l.error(d)}}))}s.l.debug("Removing node",a),n.removeNode(a)}))},x=function e(t,n){var r,i=n.children(t),l=(0,d.Z)(i),o=(0,a.Z)(i);try{for(o.s();!(r=o.n()).done;){var c=r.value;p[c]=t,l=[].concat((0,d.Z)(l),(0,d.Z)(e(c,n)))}}catch(s){o.e(s)}finally{o.f()}return l},b=function e(t,n){s.l.trace("Searching",t);var r=n.children(t);if(s.l.trace("Searching children of id ",t,r),r.length<1)return s.l.trace("This is a valid node",t),t;var i,d=(0,a.Z)(r);try{for(d.s();!(i=d.n()).done;){var l=e(i.value,n);if(l)return s.l.trace("Found replacement for",t," => ",l),l}}catch(o){d.e(o)}finally{d.f()}},m=function(e){return u[e]&&u[e].externalConnections&&u[e]?u[e].id:e},C=function(e,t){if(!e||t>10)s.l.debug("Opting out, no graph ");else{s.l.debug("Opting in, graph "),e.nodes().forEach((function(t){e.children(t).length>0&&(s.l.warn("Cluster identified",t," Replacement id in edges: ",b(t,e)),v[t]=x(t,e),u[t]={id:b(t,e),clusterData:e.node(t)})})),e.nodes().forEach((function(t){var n=e.children(t),r=e.edges();n.length>0?(s.l.debug("Cluster identified",t,v),r.forEach((function(e){e.v!==t&&e.w!==t&&(w(e.v,t)^w(e.w,t)&&(s.l.warn("Edge: ",e," leaves cluster ",t),s.l.warn("Descendants of XXX ",t,": ",v[t]),u[t].externalConnections=!0))}))):s.l.debug("Not a cluster ",t,v)}));for(var n=0,r=Object.keys(u);n<r.length;n++){var i=r[n],a=u[i].id,d=e.parent(a);d!==i&&u[d]&&!u[d].externalConnections&&(u[i].id=d)}e.edges().forEach((function(t){var n=e.edge(t);s.l.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),s.l.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(e.edge(t)));var r=t.v,i=t.w;if(s.l.warn("Fix XXX",u,"ids:",t.v,t.w,"Translating: ",u[t.v]," --- ",u[t.w]),u[t.v]&&u[t.w]&&u[t.v]===u[t.w]){s.l.warn("Fixing and trixing link to self - removing XXX",t.v,t.w,t.name),s.l.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),r=m(t.v),i=m(t.w),e.removeEdge(t.v,t.w,t.name);var a=t.w+"---"+t.v;e.setNode(a,{domId:a,id:a,labelStyle:"",labelText:n.label,padding:0,shape:"labelRect",style:""});var d=structuredClone(n),l=structuredClone(n);d.label="",d.arrowTypeEnd="none",l.label="",d.fromCluster=t.v,l.toCluster=t.v,e.setEdge(r,a,d,t.name+"-cyclic-special"),e.setEdge(a,i,l,t.name+"-cyclic-special")}else if(u[t.v]||u[t.w]){if(s.l.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),r=m(t.v),i=m(t.w),e.removeEdge(t.v,t.w,t.name),r!==t.v){var o=e.parent(r);u[o].externalConnections=!0,n.fromCluster=t.v}if(i!==t.w){var c=e.parent(i);u[c].externalConnections=!0,n.toCluster=t.w}s.l.warn("Fix Replacing with XXX",r,i,t.name),e.setEdge(r,i,n,t.name)}})),s.l.warn("Adjusted Graph",o.c(e)),E(e,0),s.l.trace(u)}},E=function e(t,n){if(s.l.warn("extractor - ",n,o.c(t),t.children("D")),n>10)s.l.error("Bailing out");else{var r,i=t.nodes(),d=!1,l=(0,a.Z)(i);try{for(l.s();!(r=l.n()).done;){var c=r.value,g=t.children(c);d=d||g.length>0}}catch(N){l.e(N)}finally{l.f()}if(d){s.l.debug("Nodes = ",i,n);var f,v=(0,a.Z)(i);try{for(v.s();!(f=v.n()).done;){var p=f.value;if(s.l.debug("Extracting node",p,u,u[p]&&!u[p].externalConnections,!t.parent(p),t.node(p),t.children("D")," Depth ",n),u[p])if(!u[p].externalConnections&&t.children(p)&&t.children(p).length>0){s.l.warn("Cluster without external connections, without a parent and with children",p,n);var w="TB"===t.graph().rankdir?"LR":"TB";u[p]&&u[p].clusterData&&u[p].clusterData.dir&&(w=u[p].clusterData.dir,s.l.warn("Fixing dir",u[p].clusterData.dir,w));var x=new h.k({multigraph:!0,compound:!0}).setGraph({rankdir:w,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));s.l.warn("Old graph before copy",o.c(t)),y(p,t,x,p),t.setNode(p,{clusterNode:!0,id:p,clusterData:u[p].clusterData,labelText:u[p].labelText,graph:x}),s.l.warn("New graph after copy node: (",p,")",o.c(x)),s.l.debug("Old graph after copy",o.c(t))}else s.l.warn("Cluster ** ",p," **not meeting the criteria !externalConnections:",!u[p].externalConnections," no parent: ",!t.parent(p)," children ",t.children(p)&&t.children(p).length>0,t.children("D"),n),s.l.debug(u);else s.l.debug("Not a cluster",p,n)}}catch(N){v.e(N)}finally{v.f()}i=t.nodes(),s.l.warn("New list of nodes",i);var b,m=(0,a.Z)(i);try{for(m.s();!(b=m.n()).done;){var C=b.value,E=t.node(C);s.l.warn(" Now next level",C,E),E.clusterNode&&e(E.graph,n+1)}}catch(N){m.e(N)}finally{m.f()}}else s.l.debug("Done, no node has children",t.nodes())}},N=function e(t,n){if(0===n.length)return[];var r=Object.assign(n);return n.forEach((function(n){var i=t.children(n),a=e(t,i);r=[].concat((0,d.Z)(r),(0,d.Z)(a))})),r},X=function(e){return N(e,e.children())},Z={rect:function(e,t){s.l.info("Creating subgraph rect for ",t.id,t);var n=(0,s.c)(),r=e.insert("g").attr("class","cluster"+(t.class?" "+t.class:"")).attr("id",t.id),i=r.insert("rect",":first-child"),a=(0,s.m)(n.flowchart.htmlLabels),d=r.insert("g").attr("class","cluster-label"),l="markdown"===t.labelType?(0,g.a)(d,t.labelText,{style:t.labelStyle,useHtmlLabels:a}):d.node().appendChild((0,c.c)(t.labelText,t.labelStyle,void 0,!0)),o=l.getBBox();if((0,s.m)(n.flowchart.htmlLabels)){var h=l.children[0],u=(0,f.Ys)(l);o=h.getBoundingClientRect(),u.attr("width",o.width),u.attr("height",o.height)}var v=0*t.padding,p=v/2,w=t.width<=o.width+v?o.width+v:t.width;t.width<=o.width+v?t.diff=(o.width-t.width)/2-t.padding/2:t.diff=-t.padding/2,s.l.trace("Data ",t,JSON.stringify(t)),i.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-w/2).attr("y",t.y-t.height/2-p).attr("width",w).attr("height",t.height+v);var y=(0,c.g)(n).subGraphTitleTopMargin;a?d.attr("transform","translate(".concat(t.x-o.width/2,", ").concat(t.y-t.height/2+y,")")):d.attr("transform","translate(".concat(t.x,", ").concat(t.y-t.height/2+y,")"));var x=i.node().getBBox();return t.width=x.width,t.height=x.height,t.intersect=function(e){return(0,c.i)(t,e)},r},roundedWithTitle:function(e,t){var n=(0,s.c)(),r=e.insert("g").attr("class",t.classes).attr("id",t.id),i=r.insert("rect",":first-child"),a=r.insert("g").attr("class","cluster-label"),d=r.append("rect"),l=a.node().appendChild((0,c.c)(t.labelText,t.labelStyle,void 0,!0)),o=l.getBBox();if((0,s.m)(n.flowchart.htmlLabels)){var h=l.children[0],g=(0,f.Ys)(l);o=h.getBoundingClientRect(),g.attr("width",o.width),g.attr("height",o.height)}o=l.getBBox();var u=0*t.padding,v=u/2,p=t.width<=o.width+t.padding?o.width+t.padding:t.width;t.width<=o.width+t.padding?t.diff=(o.width+0*t.padding-t.width)/2:t.diff=-t.padding/2,i.attr("class","outer").attr("x",t.x-p/2-v).attr("y",t.y-t.height/2-v).attr("width",p+u).attr("height",t.height+u),d.attr("class","inner").attr("x",t.x-p/2-v).attr("y",t.y-t.height/2-v+o.height-1).attr("width",p+u).attr("height",t.height+u-o.height-3);var w=(0,c.g)(n).subGraphTitleTopMargin;a.attr("transform","translate(".concat(t.x-o.width/2,", ").concat(t.y-t.height/2-t.padding/3+((0,s.m)(n.flowchart.htmlLabels)?5:3)+w,")"));var y=i.node().getBBox();return t.height=y.height,t.intersect=function(e){return(0,c.i)(t,e)},r},noteGroup:function(e,t){var n=e.insert("g").attr("class","note-cluster").attr("id",t.id),r=n.insert("rect",":first-child"),i=0*t.padding,a=i/2;r.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-a).attr("y",t.y-t.height/2-a).attr("width",t.width+i).attr("height",t.height+i).attr("fill","none");var d=r.node().getBBox();return t.width=d.width,t.height=d.height,t.intersect=function(e){return(0,c.i)(t,e)},n},divider:function(e,t){var n=e.insert("g").attr("class",t.classes).attr("id",t.id),r=n.insert("rect",":first-child"),i=0*t.padding,a=i/2;r.attr("class","divider").attr("x",t.x-t.width/2-a).attr("y",t.y-t.height/2).attr("width",t.width+i).attr("height",t.height+i);var d=r.node().getBBox();return t.width=d.width,t.height=d.height,t.diff=-t.padding/2,t.intersect=function(e){return(0,c.i)(t,e)},n}},S={},T=function(e,t){s.l.trace("Inserting cluster");var n=t.shape||"rect";S[t.id]=Z[n](e,t)},k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,a,d,h,g){var f,v,p,w,y,x,m,C,E;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.l.info("Graph in recursive render: XXX",o.c(n),h),f=n.graph().rankdir,s.l.trace("Dir in recursive render - dir:",f),v=t.insert("g").attr("class","root"),n.nodes()?s.l.info("Recursive render XXX",n.nodes()):s.l.info("No nodes found for",n),n.edges().length>0&&s.l.trace("Recursive edges",n.edge(n.edges()[0])),p=v.insert("g").attr("class","clusters"),w=v.insert("g").attr("class","edgePaths"),y=v.insert("g").attr("class","edgeLabels"),x=v.insert("g").attr("class","nodes"),e.next=12,Promise.all(n.nodes().map(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,l,o,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.node(t),void 0!==h&&(l=JSON.parse(JSON.stringify(h.clusterData)),s.l.info("Setting data for cluster XXX (",t,") ",l,h),n.setNode(h.id,l),n.parent(t)||(s.l.trace("Setting parent",t,h.id),n.setParent(t,h.id,l))),s.l.info("(Insert) Node XXX"+t+": "+JSON.stringify(n.node(t))),!i||!i.clusterNode){e.next=16;break}return s.l.info("Cluster identified",t,i.width,n.node(t)),e.next=7,k(x,i.graph,a,d,n.node(t),g);case 7:o=e.sent,v=o.elem,(0,c.u)(i,v),i.diff=o.diff||0,s.l.info("Node bounds (abc123)",t,i,i.width,i.x,i.y),(0,c.s)(v,i),s.l.warn("Recursive render complete ",v,i),e.next=25;break;case 16:if(!(n.children(t).length>0)){e.next=22;break}s.l.info("Cluster - the non recursive path XXX",t,i.id,i,n),s.l.info(b(i.id,n)),u[i.id]={id:b(i.id,n),node:i},e.next=25;break;case 22:return s.l.info("Node - the non recursive path",t,i.id,i),e.next=25,(0,c.e)(x,n.node(t),f);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return n.edges().forEach((function(e){var t=n.edge(e.v,e.w,e.name);s.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),s.l.info("Edge "+e.v+" -> "+e.w+": ",e," ",JSON.stringify(n.edge(e))),s.l.info("Fix",u,"ids:",e.v,e.w,"Translating: ",u[e.v],u[e.w]),(0,c.f)(y,t)})),n.edges().forEach((function(e){s.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e))})),s.l.info("#############################################"),s.l.info("###                Layout                 ###"),s.l.info("#############################################"),s.l.info(n),(0,l.bK)(n),s.l.info("Graph after layout:",o.c(n)),m=0,C=(0,c.g)(g),E=C.subGraphTitleTotalMargin,X(n).forEach((function(e){var t=n.node(e);s.l.info("Position "+e+": "+JSON.stringify(n.node(e))),s.l.info("Position "+e+": ("+t.x,","+t.y,") width: ",t.width," height: ",t.height),t&&t.clusterNode?(t.y+=E,(0,c.p)(t)):n.children(e).length>0?(t.height+=E,T(p,t),u[t.id].node=t):(t.y+=E/2,(0,c.p)(t))})),n.edges().forEach((function(e){var t=n.edge(e);s.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t),t),t.points.forEach((function(e){return e.y+=E/2}));var r=(0,c.h)(w,e,t,u,a,n,d);(0,c.j)(t,r)})),n.nodes().forEach((function(e){var t=n.node(e);s.l.info(e,t.type,t.diff),"group"===t.type&&(m=t.diff)})),e.abrupt("return",{elem:v,diff:m});case 26:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,d){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a,d){var l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,c.a)(t,i,a,d),(0,c.b)(),(0,c.d)(),S={},v={},p={},u={},s.l.warn("Graph at first:",JSON.stringify(o.c(n))),C(n),s.l.warn("Graph after:",JSON.stringify(o.c(n))),l=(0,s.c)(),e.next=11,k(t,n,a,d,void 0,l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=297.d204317d.chunk.js.map