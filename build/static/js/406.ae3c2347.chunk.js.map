{"version":3,"file":"static/js/406.ae3c2347.chunk.js","mappings":"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","sources":["../node_modules/mermaid/dist/classDiagram-30eddba6.js"],"sourcesContent":["import { p as parser, d as db, s as styles } from \"./styles-991ebdfc.js\";\nimport { line, curveBasis, select } from \"d3\";\nimport { layout } from \"dagre-d3-es/src/dagre/index.js\";\nimport * as graphlib from \"dagre-d3-es/src/graphlib/index.js\";\nimport { u as utils, l as log, x as parseGenericTypes, c as getConfig, i as configureSvgSize } from \"./mermaid-f47111a7.js\";\nimport \"ts-dedent\";\nimport \"dayjs\";\nimport \"@braintree/sanitize-url\";\nimport \"dompurify\";\nimport \"khroma\";\nimport \"lodash-es/memoize.js\";\nimport \"lodash-es/merge.js\";\nimport \"stylis\";\nimport \"lodash-es/isEmpty.js\";\nlet edgeCount = 0;\nconst drawEdge = function(elem, path, relation, conf, diagObj) {\n  const getRelationType = function(type) {\n    switch (type) {\n      case diagObj.db.relationType.AGGREGATION:\n        return \"aggregation\";\n      case diagObj.db.relationType.EXTENSION:\n        return \"extension\";\n      case diagObj.db.relationType.COMPOSITION:\n        return \"composition\";\n      case diagObj.db.relationType.DEPENDENCY:\n        return \"dependency\";\n      case diagObj.db.relationType.LOLLIPOP:\n        return \"lollipop\";\n    }\n  };\n  path.points = path.points.filter((p) => !Number.isNaN(p.y));\n  const lineData = path.points;\n  const lineFunction = line().x(function(d) {\n    return d.x;\n  }).y(function(d) {\n    return d.y;\n  }).curve(curveBasis);\n  const svgPath = elem.append(\"path\").attr(\"d\", lineFunction(lineData)).attr(\"id\", \"edge\" + edgeCount).attr(\"class\", \"relation\");\n  let url = \"\";\n  if (conf.arrowMarkerAbsolute) {\n    url = window.location.protocol + \"//\" + window.location.host + window.location.pathname + window.location.search;\n    url = url.replace(/\\(/g, \"\\\\(\");\n    url = url.replace(/\\)/g, \"\\\\)\");\n  }\n  if (relation.relation.lineType == 1) {\n    svgPath.attr(\"class\", \"relation dashed-line\");\n  }\n  if (relation.relation.lineType == 10) {\n    svgPath.attr(\"class\", \"relation dotted-line\");\n  }\n  if (relation.relation.type1 !== \"none\") {\n    svgPath.attr(\n      \"marker-start\",\n      \"url(\" + url + \"#\" + getRelationType(relation.relation.type1) + \"Start)\"\n    );\n  }\n  if (relation.relation.type2 !== \"none\") {\n    svgPath.attr(\n      \"marker-end\",\n      \"url(\" + url + \"#\" + getRelationType(relation.relation.type2) + \"End)\"\n    );\n  }\n  let x, y;\n  const l = path.points.length;\n  let labelPosition = utils.calcLabelPosition(path.points);\n  x = labelPosition.x;\n  y = labelPosition.y;\n  let p1_card_x, p1_card_y;\n  let p2_card_x, p2_card_y;\n  if (l % 2 !== 0 && l > 1) {\n    let cardinality_1_point = utils.calcCardinalityPosition(\n      relation.relation.type1 !== \"none\",\n      path.points,\n      path.points[0]\n    );\n    let cardinality_2_point = utils.calcCardinalityPosition(\n      relation.relation.type2 !== \"none\",\n      path.points,\n      path.points[l - 1]\n    );\n    log.debug(\"cardinality_1_point \" + JSON.stringify(cardinality_1_point));\n    log.debug(\"cardinality_2_point \" + JSON.stringify(cardinality_2_point));\n    p1_card_x = cardinality_1_point.x;\n    p1_card_y = cardinality_1_point.y;\n    p2_card_x = cardinality_2_point.x;\n    p2_card_y = cardinality_2_point.y;\n  }\n  if (relation.title !== void 0) {\n    const g = elem.append(\"g\").attr(\"class\", \"classLabel\");\n    const label = g.append(\"text\").attr(\"class\", \"label\").attr(\"x\", x).attr(\"y\", y).attr(\"fill\", \"red\").attr(\"text-anchor\", \"middle\").text(relation.title);\n    window.label = label;\n    const bounds = label.node().getBBox();\n    g.insert(\"rect\", \":first-child\").attr(\"class\", \"box\").attr(\"x\", bounds.x - conf.padding / 2).attr(\"y\", bounds.y - conf.padding / 2).attr(\"width\", bounds.width + conf.padding).attr(\"height\", bounds.height + conf.padding);\n  }\n  log.info(\"Rendering relation \" + JSON.stringify(relation));\n  if (relation.relationTitle1 !== void 0 && relation.relationTitle1 !== \"none\") {\n    const g = elem.append(\"g\").attr(\"class\", \"cardinality\");\n    g.append(\"text\").attr(\"class\", \"type1\").attr(\"x\", p1_card_x).attr(\"y\", p1_card_y).attr(\"fill\", \"black\").attr(\"font-size\", \"6\").text(relation.relationTitle1);\n  }\n  if (relation.relationTitle2 !== void 0 && relation.relationTitle2 !== \"none\") {\n    const g = elem.append(\"g\").attr(\"class\", \"cardinality\");\n    g.append(\"text\").attr(\"class\", \"type2\").attr(\"x\", p2_card_x).attr(\"y\", p2_card_y).attr(\"fill\", \"black\").attr(\"font-size\", \"6\").text(relation.relationTitle2);\n  }\n  edgeCount++;\n};\nconst drawClass = function(elem, classDef, conf, diagObj) {\n  log.debug(\"Rendering class \", classDef, conf);\n  const id = classDef.id;\n  const classInfo = {\n    id,\n    label: classDef.id,\n    width: 0,\n    height: 0\n  };\n  const g = elem.append(\"g\").attr(\"id\", diagObj.db.lookUpDomId(id)).attr(\"class\", \"classGroup\");\n  let title;\n  if (classDef.link) {\n    title = g.append(\"svg:a\").attr(\"xlink:href\", classDef.link).attr(\"target\", classDef.linkTarget).append(\"text\").attr(\"y\", conf.textHeight + conf.padding).attr(\"x\", 0);\n  } else {\n    title = g.append(\"text\").attr(\"y\", conf.textHeight + conf.padding).attr(\"x\", 0);\n  }\n  let isFirst = true;\n  classDef.annotations.forEach(function(member) {\n    const titleText2 = title.append(\"tspan\").text(\"«\" + member + \"»\");\n    if (!isFirst) {\n      titleText2.attr(\"dy\", conf.textHeight);\n    }\n    isFirst = false;\n  });\n  let classTitleString = getClassTitleString(classDef);\n  const classTitle = title.append(\"tspan\").text(classTitleString).attr(\"class\", \"title\");\n  if (!isFirst) {\n    classTitle.attr(\"dy\", conf.textHeight);\n  }\n  const titleHeight = title.node().getBBox().height;\n  let membersLine;\n  let membersBox;\n  let methodsLine;\n  if (classDef.members.length > 0) {\n    membersLine = g.append(\"line\").attr(\"x1\", 0).attr(\"y1\", conf.padding + titleHeight + conf.dividerMargin / 2).attr(\"y2\", conf.padding + titleHeight + conf.dividerMargin / 2);\n    const members = g.append(\"text\").attr(\"x\", conf.padding).attr(\"y\", titleHeight + conf.dividerMargin + conf.textHeight).attr(\"fill\", \"white\").attr(\"class\", \"classText\");\n    isFirst = true;\n    classDef.members.forEach(function(member) {\n      addTspan(members, member, isFirst, conf);\n      isFirst = false;\n    });\n    membersBox = members.node().getBBox();\n  }\n  if (classDef.methods.length > 0) {\n    methodsLine = g.append(\"line\").attr(\"x1\", 0).attr(\"y1\", conf.padding + titleHeight + conf.dividerMargin + membersBox.height).attr(\"y2\", conf.padding + titleHeight + conf.dividerMargin + membersBox.height);\n    const methods = g.append(\"text\").attr(\"x\", conf.padding).attr(\"y\", titleHeight + 2 * conf.dividerMargin + membersBox.height + conf.textHeight).attr(\"fill\", \"white\").attr(\"class\", \"classText\");\n    isFirst = true;\n    classDef.methods.forEach(function(method) {\n      addTspan(methods, method, isFirst, conf);\n      isFirst = false;\n    });\n  }\n  const classBox = g.node().getBBox();\n  var cssClassStr = \" \";\n  if (classDef.cssClasses.length > 0) {\n    cssClassStr = cssClassStr + classDef.cssClasses.join(\" \");\n  }\n  const rect = g.insert(\"rect\", \":first-child\").attr(\"x\", 0).attr(\"y\", 0).attr(\"width\", classBox.width + 2 * conf.padding).attr(\"height\", classBox.height + conf.padding + 0.5 * conf.dividerMargin).attr(\"class\", cssClassStr);\n  const rectWidth = rect.node().getBBox().width;\n  title.node().childNodes.forEach(function(x) {\n    x.setAttribute(\"x\", (rectWidth - x.getBBox().width) / 2);\n  });\n  if (classDef.tooltip) {\n    title.insert(\"title\").text(classDef.tooltip);\n  }\n  if (membersLine) {\n    membersLine.attr(\"x2\", rectWidth);\n  }\n  if (methodsLine) {\n    methodsLine.attr(\"x2\", rectWidth);\n  }\n  classInfo.width = rectWidth;\n  classInfo.height = classBox.height + conf.padding + 0.5 * conf.dividerMargin;\n  return classInfo;\n};\nconst getClassTitleString = function(classDef) {\n  let classTitleString = classDef.id;\n  if (classDef.type) {\n    classTitleString += \"<\" + parseGenericTypes(classDef.type) + \">\";\n  }\n  return classTitleString;\n};\nconst drawNote = function(elem, note, conf, diagObj) {\n  log.debug(\"Rendering note \", note, conf);\n  const id = note.id;\n  const noteInfo = {\n    id,\n    text: note.text,\n    width: 0,\n    height: 0\n  };\n  const g = elem.append(\"g\").attr(\"id\", id).attr(\"class\", \"classGroup\");\n  let text = g.append(\"text\").attr(\"y\", conf.textHeight + conf.padding).attr(\"x\", 0);\n  const lines = JSON.parse(`\"${note.text}\"`).split(\"\\n\");\n  lines.forEach(function(line2) {\n    log.debug(`Adding line: ${line2}`);\n    text.append(\"tspan\").text(line2).attr(\"class\", \"title\").attr(\"dy\", conf.textHeight);\n  });\n  const noteBox = g.node().getBBox();\n  const rect = g.insert(\"rect\", \":first-child\").attr(\"x\", 0).attr(\"y\", 0).attr(\"width\", noteBox.width + 2 * conf.padding).attr(\n    \"height\",\n    noteBox.height + lines.length * conf.textHeight + conf.padding + 0.5 * conf.dividerMargin\n  );\n  const rectWidth = rect.node().getBBox().width;\n  text.node().childNodes.forEach(function(x) {\n    x.setAttribute(\"x\", (rectWidth - x.getBBox().width) / 2);\n  });\n  noteInfo.width = rectWidth;\n  noteInfo.height = noteBox.height + lines.length * conf.textHeight + conf.padding + 0.5 * conf.dividerMargin;\n  return noteInfo;\n};\nconst addTspan = function(textEl, member, isFirst, conf) {\n  const { displayText, cssStyle } = member.getDisplayDetails();\n  const tSpan = textEl.append(\"tspan\").attr(\"x\", conf.padding).text(displayText);\n  if (cssStyle !== \"\") {\n    tSpan.attr(\"style\", member.cssStyle);\n  }\n  if (!isFirst) {\n    tSpan.attr(\"dy\", conf.textHeight);\n  }\n};\nconst svgDraw = {\n  getClassTitleString,\n  drawClass,\n  drawEdge,\n  drawNote\n};\nlet idCache = {};\nconst padding = 20;\nconst getGraphId = function(label) {\n  const foundEntry = Object.entries(idCache).find((entry) => entry[1].label === label);\n  if (foundEntry) {\n    return foundEntry[0];\n  }\n};\nconst insertMarkers = function(elem) {\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"extensionStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 1,7 L18,13 V 1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"extensionEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 1,1 V 13 L18,7 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"compositionStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"compositionEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"aggregationStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"aggregationEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"dependencyStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 5,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"dependencyEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L14,7 L9,1 Z\");\n};\nconst draw = function(text, id, _version, diagObj) {\n  const conf = getConfig().class;\n  idCache = {};\n  log.info(\"Rendering diagram \" + text);\n  const securityLevel = getConfig().securityLevel;\n  let sandboxElement;\n  if (securityLevel === \"sandbox\") {\n    sandboxElement = select(\"#i\" + id);\n  }\n  const root = securityLevel === \"sandbox\" ? select(sandboxElement.nodes()[0].contentDocument.body) : select(\"body\");\n  const diagram2 = root.select(`[id='${id}']`);\n  insertMarkers(diagram2);\n  const g = new graphlib.Graph({\n    multigraph: true\n  });\n  g.setGraph({\n    isMultiGraph: true\n  });\n  g.setDefaultEdgeLabel(function() {\n    return {};\n  });\n  const classes = diagObj.db.getClasses();\n  const keys = Object.keys(classes);\n  for (const key of keys) {\n    const classDef = classes[key];\n    const node = svgDraw.drawClass(diagram2, classDef, conf, diagObj);\n    idCache[node.id] = node;\n    g.setNode(node.id, node);\n    log.info(\"Org height: \" + node.height);\n  }\n  const relations = diagObj.db.getRelations();\n  relations.forEach(function(relation) {\n    log.info(\n      // cspell:ignore tjoho\n      \"tjoho\" + getGraphId(relation.id1) + getGraphId(relation.id2) + JSON.stringify(relation)\n    );\n    g.setEdge(\n      getGraphId(relation.id1),\n      getGraphId(relation.id2),\n      {\n        relation\n      },\n      relation.title || \"DEFAULT\"\n    );\n  });\n  const notes = diagObj.db.getNotes();\n  notes.forEach(function(note) {\n    log.debug(`Adding note: ${JSON.stringify(note)}`);\n    const node = svgDraw.drawNote(diagram2, note, conf, diagObj);\n    idCache[node.id] = node;\n    g.setNode(node.id, node);\n    if (note.class && note.class in classes) {\n      g.setEdge(\n        note.id,\n        getGraphId(note.class),\n        {\n          relation: {\n            id1: note.id,\n            id2: note.class,\n            relation: {\n              type1: \"none\",\n              type2: \"none\",\n              lineType: 10\n            }\n          }\n        },\n        \"DEFAULT\"\n      );\n    }\n  });\n  layout(g);\n  g.nodes().forEach(function(v) {\n    if (v !== void 0 && g.node(v) !== void 0) {\n      log.debug(\"Node \" + v + \": \" + JSON.stringify(g.node(v)));\n      root.select(\"#\" + (diagObj.db.lookUpDomId(v) || v)).attr(\n        \"transform\",\n        \"translate(\" + (g.node(v).x - g.node(v).width / 2) + \",\" + (g.node(v).y - g.node(v).height / 2) + \" )\"\n      );\n    }\n  });\n  g.edges().forEach(function(e) {\n    if (e !== void 0 && g.edge(e) !== void 0) {\n      log.debug(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(g.edge(e)));\n      svgDraw.drawEdge(diagram2, g.edge(e), g.edge(e).relation, conf, diagObj);\n    }\n  });\n  const svgBounds = diagram2.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n  configureSvgSize(diagram2, height, width, conf.useMaxWidth);\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  log.debug(`viewBox ${vBox}`);\n  diagram2.attr(\"viewBox\", vBox);\n};\nconst renderer = {\n  draw\n};\nconst diagram = {\n  parser,\n  db,\n  renderer,\n  styles,\n  init: (cnf) => {\n    if (!cnf.class) {\n      cnf.class = {};\n    }\n    cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n    db.clear();\n  }\n};\nexport {\n  diagram\n};\n"],"names":["edgeCount","getClassTitleString","classDef","classTitleString","id","type","parseGenericTypes","addTspan","textEl","member","isFirst","conf","_member$getDisplayDet","getDisplayDetails","displayText","cssStyle","tSpan","append","attr","padding","text","textHeight","svgDraw","elem","diagObj","log","debug","title","classInfo","label","width","height","g","db","lookUpDomId","link","linkTarget","annotations","forEach","titleText2","classTitle","membersLine","membersBox","methodsLine","titleHeight","node","getBBox","members","length","dividerMargin","methods","method","classBox","cssClassStr","cssClasses","join","rectWidth","insert","childNodes","x","setAttribute","tooltip","path","relation","getRelationType","relationType","AGGREGATION","EXTENSION","COMPOSITION","DEPENDENCY","LOLLIPOP","points","filter","p","Number","isNaN","y","lineData","lineFunction","line","d","curve","curveBasis","svgPath","url","arrowMarkerAbsolute","window","location","protocol","host","pathname","search","replace","lineType","type1","type2","p1_card_x","p1_card_y","p2_card_x","p2_card_y","l","labelPosition","utils","calcLabelPosition","cardinality_1_point","calcCardinalityPosition","cardinality_2_point","JSON","stringify","bounds","info","relationTitle1","relationTitle2","note","noteInfo","lines","parse","concat","split","line2","noteBox","idCache","getGraphId","foundEntry","Object","entries","find","entry","renderer","draw","_version","getConfig","class","sandboxElement","securityLevel","select","root","nodes","contentDocument","body","diagram2","graphlib","multigraph","setGraph","isMultiGraph","setDefaultEdgeLabel","classes","getClasses","_i","_keys","keys","key","setNode","getRelations","id1","id2","setEdge","getNotes","layout","v","edges","e","edge","w","svgBounds","configureSvgSize","useMaxWidth","vBox","diagram","parser","styles","init","cnf","clear"],"sourceRoot":""}