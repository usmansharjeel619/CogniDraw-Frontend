"use strict";(self.webpackChunkfrontends=self.webpackChunkfrontends||[]).push([[406],{6406:function(t,e,a){a.r(e),a.d(e,{diagram:function(){return y}});var r=a(3072),i=a(9913),n=a(3529),d=a(8433),o=a(1319),s=(a(7892),a(504),a(8703),0),l=function(t){var e=t.id;return t.type&&(e+="<"+(0,o.x)(t.type)+">"),e},p=function(t,e,a,r){var i=e.getDisplayDetails(),n=i.displayText,d=i.cssStyle,o=t.append("tspan").attr("x",r.padding).text(n);""!==d&&o.attr("style",e.cssStyle),a||o.attr("dy",r.textHeight)},c=function(t,e,a,r){o.l.debug("Rendering class ",e,a);var i,n=e.id,d={id:n,label:e.id,width:0,height:0},s=t.append("g").attr("id",r.db.lookUpDomId(n)).attr("class","classGroup");i=e.link?s.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",a.textHeight+a.padding).attr("x",0):s.append("text").attr("y",a.textHeight+a.padding).attr("x",0);var c=!0;e.annotations.forEach((function(t){var e=i.append("tspan").text("\xab"+t+"\xbb");c||e.attr("dy",a.textHeight),c=!1}));var g=l(e),h=i.append("tspan").text(g).attr("class","title");c||h.attr("dy",a.textHeight);var f,x,u,y=i.node().getBBox().height;if(e.members.length>0){f=s.append("line").attr("x1",0).attr("y1",a.padding+y+a.dividerMargin/2).attr("y2",a.padding+y+a.dividerMargin/2);var v=s.append("text").attr("x",a.padding).attr("y",y+a.dividerMargin+a.textHeight).attr("fill","white").attr("class","classText");c=!0,e.members.forEach((function(t){p(v,t,c,a),c=!1})),x=v.node().getBBox()}if(e.methods.length>0){u=s.append("line").attr("x1",0).attr("y1",a.padding+y+a.dividerMargin+x.height).attr("y2",a.padding+y+a.dividerMargin+x.height);var b=s.append("text").attr("x",a.padding).attr("y",y+2*a.dividerMargin+x.height+a.textHeight).attr("fill","white").attr("class","classText");c=!0,e.methods.forEach((function(t){p(b,t,c,a),c=!1}))}var m=s.node().getBBox(),k=" ";e.cssClasses.length>0&&(k+=e.cssClasses.join(" "));var w=s.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",m.width+2*a.padding).attr("height",m.height+a.padding+.5*a.dividerMargin).attr("class",k).node().getBBox().width;return i.node().childNodes.forEach((function(t){t.setAttribute("x",(w-t.getBBox().width)/2)})),e.tooltip&&i.insert("title").text(e.tooltip),f&&f.attr("x2",w),u&&u.attr("x2",w),d.width=w,d.height=m.height+a.padding+.5*a.dividerMargin,d},g=function(t,e,a,r,n){var d=function(t){switch(t){case n.db.relationType.AGGREGATION:return"aggregation";case n.db.relationType.EXTENSION:return"extension";case n.db.relationType.COMPOSITION:return"composition";case n.db.relationType.DEPENDENCY:return"dependency";case n.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter((function(t){return!Number.isNaN(t.y)}));var l,p,c=e.points,g=(0,i.jvg)().x((function(t){return t.x})).y((function(t){return t.y})).curve(i.$0Z),h=t.append("path").attr("d",g(c)).attr("id","edge"+s).attr("class","relation"),f="";r.arrowMarkerAbsolute&&(f=(f=(f=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),1==a.relation.lineType&&h.attr("class","relation dashed-line"),10==a.relation.lineType&&h.attr("class","relation dotted-line"),"none"!==a.relation.type1&&h.attr("marker-start","url("+f+"#"+d(a.relation.type1)+"Start)"),"none"!==a.relation.type2&&h.attr("marker-end","url("+f+"#"+d(a.relation.type2)+"End)");var x,u,y,v,b=e.points.length,m=o.u.calcLabelPosition(e.points);if(l=m.x,p=m.y,b%2!==0&&b>1){var k=o.u.calcCardinalityPosition("none"!==a.relation.type1,e.points,e.points[0]),w=o.u.calcCardinalityPosition("none"!==a.relation.type2,e.points,e.points[b-1]);o.l.debug("cardinality_1_point "+JSON.stringify(k)),o.l.debug("cardinality_2_point "+JSON.stringify(w)),x=k.x,u=k.y,y=w.x,v=w.y}if(void 0!==a.title){var L=t.append("g").attr("class","classLabel"),E=L.append("text").attr("class","label").attr("x",l).attr("y",p).attr("fill","red").attr("text-anchor","middle").text(a.title);window.label=E;var M=E.node().getBBox();L.insert("rect",":first-child").attr("class","box").attr("x",M.x-r.padding/2).attr("y",M.y-r.padding/2).attr("width",M.width+r.padding).attr("height",M.height+r.padding)}(o.l.info("Rendering relation "+JSON.stringify(a)),void 0!==a.relationTitle1&&"none"!==a.relationTitle1)&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",x).attr("y",u).attr("fill","black").attr("font-size","6").text(a.relationTitle1);void 0!==a.relationTitle2&&"none"!==a.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",y).attr("y",v).attr("fill","black").attr("font-size","6").text(a.relationTitle2);s++},h=function(t,e,a,r){o.l.debug("Rendering note ",e,a);var i=e.id,n={id:i,text:e.text,width:0,height:0},d=t.append("g").attr("id",i).attr("class","classGroup"),s=d.append("text").attr("y",a.textHeight+a.padding).attr("x",0),l=JSON.parse('"'.concat(e.text,'"')).split("\n");l.forEach((function(t){o.l.debug("Adding line: ".concat(t)),s.append("tspan").text(t).attr("class","title").attr("dy",a.textHeight)}));var p=d.node().getBBox(),c=d.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",p.width+2*a.padding).attr("height",p.height+l.length*a.textHeight+a.padding+.5*a.dividerMargin).node().getBBox().width;return s.node().childNodes.forEach((function(t){t.setAttribute("x",(c-t.getBBox().width)/2)})),n.width=c,n.height=p.height+l.length*a.textHeight+a.padding+.5*a.dividerMargin,n},f={},x=function(t){var e=Object.entries(f).find((function(e){return e[1].label===t}));if(e)return e[0]},u={draw:function(t,e,a,r){var s=(0,o.c)().class;f={},o.l.info("Rendering diagram "+t);var l,p=(0,o.c)().securityLevel;"sandbox"===p&&(l=(0,i.Ys)("#i"+e));var u,y="sandbox"===p?(0,i.Ys)(l.nodes()[0].contentDocument.body):(0,i.Ys)("body"),v=y.select("[id='".concat(e,"']"));(u=v).append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),u.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),u.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),u.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),u.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),u.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),u.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),u.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z");var b=new d.k({multigraph:!0});b.setGraph({isMultiGraph:!0}),b.setDefaultEdgeLabel((function(){return{}}));for(var m=r.db.getClasses(),k=0,w=Object.keys(m);k<w.length;k++){var L=w[k],E=m[L],M=c(v,E,s,r);f[M.id]=M,b.setNode(M.id,M),o.l.info("Org height: "+M.height)}r.db.getRelations().forEach((function(t){o.l.info("tjoho"+x(t.id1)+x(t.id2)+JSON.stringify(t)),b.setEdge(x(t.id1),x(t.id2),{relation:t},t.title||"DEFAULT")})),r.db.getNotes().forEach((function(t){o.l.debug("Adding note: ".concat(JSON.stringify(t)));var e=h(v,t,s,r);f[e.id]=e,b.setNode(e.id,e),t.class&&t.class in m&&b.setEdge(t.id,x(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")})),(0,n.bK)(b),b.nodes().forEach((function(t){void 0!==t&&void 0!==b.node(t)&&(o.l.debug("Node "+t+": "+JSON.stringify(b.node(t))),y.select("#"+(r.db.lookUpDomId(t)||t)).attr("transform","translate("+(b.node(t).x-b.node(t).width/2)+","+(b.node(t).y-b.node(t).height/2)+" )"))})),b.edges().forEach((function(t){void 0!==t&&void 0!==b.edge(t)&&(o.l.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(b.edge(t))),g(v,b.edge(t),b.edge(t).relation,s,r))}));var N=v.node().getBBox(),T=N.width+40,B=N.height+40;(0,o.i)(v,B,T,s.useMaxWidth);var H="".concat(N.x-20," ").concat(N.y-20," ").concat(T," ").concat(B);o.l.debug("viewBox ".concat(H)),v.attr("viewBox",H)}},y={parser:r.p,db:r.d,renderer:u,styles:r.s,init:function(t){t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,r.d.clear()}}}}]);
//# sourceMappingURL=406.ae3c2347.chunk.js.map